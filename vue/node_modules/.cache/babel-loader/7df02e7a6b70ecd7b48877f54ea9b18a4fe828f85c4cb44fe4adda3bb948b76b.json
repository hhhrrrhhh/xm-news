{"ast":null,"code":"export default {\n  name: \"NewsDetail\",\n  data() {\n    return {\n      id: this.$route.query.id,\n      news: {}\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.$request.get('/news/selectById/' + this.id).then(res => {\n        this.news = res.data || {};\n      });\n    },\n    copyContent() {\n      // 创建一个不可见的、可编辑的div元素\n      const tempDiv = document.createElement('div');\n      tempDiv.style.position = 'absolute';\n      tempDiv.style.left = '-9999px';\n      tempDiv.style.whiteSpace = 'pre-wrap'; // 保持空白符和换行符\n      tempDiv.setAttribute('contenteditable', 'true');\n      document.body.appendChild(tempDiv);\n\n      // 将富文本编辑器的内容复制到这个div中\n      tempDiv.innerHTML = this.$refs.editor.innerHTML;\n\n      // 选中div中的内容\n      const range = document.createRange();\n      range.selectNodeContents(tempDiv);\n      const selection = window.getSelection();\n      selection.removeAllRanges();\n      selection.addRange(range);\n\n      // 执行复制操作\n      document.execCommand('copy');\n\n      // 清除选中和移除临时div\n      selection.removeAllRanges();\n      document.body.removeChild(tempDiv);\n\n      // 通知用户复制成功\n      alert('内容已复制到剪贴板！');\n    }\n  }\n};","map":{"version":3,"names":["name","data","id","$route","query","news","created","load","methods","$request","get","then","res","copyContent","tempDiv","document","createElement","style","position","left","whiteSpace","setAttribute","body","appendChild","innerHTML","$refs","editor","range","createRange","selectNodeContents","selection","window","getSelection","removeAllRanges","addRange","execCommand","removeChild","alert"],"sources":["src/views/front/NewsDetail.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 50%; margin: 10px auto\">\r\n    <div class=\"card\">\r\n      <div style=\"font-size: 24px; font-weight: bold; text-align: center; margin-bottom: 10px\">{{ news.title }}</div>\r\n      <el-button type=\"primary\" @click=\"copyContent\">一键复制</el-button>\r\n      <div style=\"text-align: center; color: #888; margin-bottom: 20px\">\r\n        <span>发布时间：{{ news.time }}</span>\r\n      </div>\r\n      <div class=\"w-e-text\">\r\n        <!-- 使用 ref 来引用富文本内容 -->\r\n        <div ref=\"editor\" v-html=\"news.content\" class=\"content-style\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"NewsDetail\",\r\n  data() {\r\n    return {\r\n      id: this.$route.query.id,\r\n      news: {}\r\n    }\r\n  },\r\n  created() {\r\n      this.load()\r\n  },\r\n  methods: {\r\n    load() {\r\n      this.$request.get('/news/selectById/' + this.id).then(res => {\r\n        this.news = res.data || {}\r\n      })\r\n    },\r\n    copyContent() {\r\n      // 创建一个不可见的、可编辑的div元素\r\n      const tempDiv = document.createElement('div');\r\n      tempDiv.style.position = 'absolute';\r\n      tempDiv.style.left = '-9999px';\r\n      tempDiv.style.whiteSpace = 'pre-wrap'; // 保持空白符和换行符\r\n      tempDiv.setAttribute('contenteditable', 'true');\r\n      document.body.appendChild(tempDiv);\r\n\r\n      // 将富文本编辑器的内容复制到这个div中\r\n      tempDiv.innerHTML = this.$refs.editor.innerHTML;\r\n\r\n      // 选中div中的内容\r\n      const range = document.createRange();\r\n      range.selectNodeContents(tempDiv);\r\n      const selection = window.getSelection();\r\n      selection.removeAllRanges();\r\n      selection.addRange(range);\r\n\r\n      // 执行复制操作\r\n      document.execCommand('copy');\r\n\r\n      // 清除选中和移除临时div\r\n      selection.removeAllRanges();\r\n      document.body.removeChild(tempDiv);\r\n\r\n      // 通知用户复制成功\r\n      alert('内容已复制到剪贴板！');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 指定富文本内容的样式 */\r\n.content-style {\r\n  font-family: 'Microsoft YaHei', sans-serif; /* 字体：微软雅黑 */\r\n  font-size: 18px; /* 字号 */\r\n  line-height: 50px; /* 行间距 */\r\n  color: #333; /* 字体颜色 */\r\n  padding: 10px; /* 内边距 */\r\n}\r\n</style>"],"mappings":"AAiBA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,EAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,EAAA;MACAG,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAA;MACA,KAAAE,QAAA,CAAAC,GAAA,4BAAAR,EAAA,EAAAS,IAAA,CAAAC,GAAA;QACA,KAAAP,IAAA,GAAAO,GAAA,CAAAX,IAAA;MACA;IACA;IACAY,YAAA;MACA;MACA,MAAAC,OAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,OAAA,CAAAG,KAAA,CAAAC,QAAA;MACAJ,OAAA,CAAAG,KAAA,CAAAE,IAAA;MACAL,OAAA,CAAAG,KAAA,CAAAG,UAAA;MACAN,OAAA,CAAAO,YAAA;MACAN,QAAA,CAAAO,IAAA,CAAAC,WAAA,CAAAT,OAAA;;MAEA;MACAA,OAAA,CAAAU,SAAA,QAAAC,KAAA,CAAAC,MAAA,CAAAF,SAAA;;MAEA;MACA,MAAAG,KAAA,GAAAZ,QAAA,CAAAa,WAAA;MACAD,KAAA,CAAAE,kBAAA,CAAAf,OAAA;MACA,MAAAgB,SAAA,GAAAC,MAAA,CAAAC,YAAA;MACAF,SAAA,CAAAG,eAAA;MACAH,SAAA,CAAAI,QAAA,CAAAP,KAAA;;MAEA;MACAZ,QAAA,CAAAoB,WAAA;;MAEA;MACAL,SAAA,CAAAG,eAAA;MACAlB,QAAA,CAAAO,IAAA,CAAAc,WAAA,CAAAtB,OAAA;;MAEA;MACAuB,KAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}